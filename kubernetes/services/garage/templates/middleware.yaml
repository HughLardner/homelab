---
# Redirect from garage.silverseekers.org to s3-ui.silverseekers.org
# The Garage s3_web endpoint is for static site hosting (bucket.web.domain)
# MinIO Console provides the actual bucket browsing UI
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: garage-redirect-to-console
  namespace: {{ .Release.Namespace }}
  labels:
    app.kubernetes.io/name: garage
spec:
  redirectRegex:
    regex: "^https://{{ .Values.services.garage.web_domain | default "garage.silverseekers.org" }}(.*)"
    replacement: "https://{{ .Values.services.minio_console.domain | default "s3-ui.silverseekers.org" }}${1}"
    permanent: true

