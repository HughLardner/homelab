---
# Homepage Services ConfigMap
# Contains service groups for the dashboard
# Services can also be auto-discovered via Kubernetes annotations
apiVersion: v1
kind: ConfigMap
metadata:
  name: homepage-services
  namespace: {{ .Release.Namespace }}
  labels:
    app.kubernetes.io/name: homepage
    app.kubernetes.io/component: config
data:
  # Note: siteMonitor disabled - SSL cert validation fails from inside cluster
  services.yaml: |
    - Infrastructure:
        - Traefik:
            href: https://{{ .Values.services.traefik.domain }}
            description: Ingress Controller & Reverse Proxy
            icon: traefik
        - ArgoCD:
            href: https://{{ .Values.services.argocd.domain }}
            description: GitOps Continuous Delivery
            icon: argocd
        - Authelia:
            href: https://{{ .Values.services.authelia.domain }}
            description: Single Sign-On Authentication
            icon: authelia
    - Storage:
        - Longhorn:
            href: https://{{ .Values.services.longhorn.domain }}
            description: Distributed Block Storage
            icon: longhorn
        - MinIO:
            href: https://{{ .Values.services.minio.console_domain }}
            description: S3-Compatible Object Storage
            icon: minio
    - Monitoring:
        - Grafana:
            href: https://{{ .Values.services.grafana.domain }}
            description: Dashboards & Visualization
            icon: grafana
    # Proxmox service removed - triggers proxmox.yaml requirement which crashes pod

